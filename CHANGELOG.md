# Changelog

## v2.0.2 (2026-02-24)

### 发布流程

- 调整 GitHub Actions 发布依赖：`Create GitHub Release` 仅依赖 `build-macos` 与 `build-windows`。
- `build-macos-intel` 改为非阻塞下载，避免 Intel runner 异常时阻断 Windows 与 Apple Silicon 版本发布。

## v2.0.1 (2026-02-24)

### 优化与稳定性

- 新增任务级自动重试与分级降级策略（单次失败不再直接整文件失败），并在界面中显示重试状态。
- 增强页面级兜底：OCR 页失败时可按策略回退复制原页，最终页数校验更严格，减少缺页风险。
- 增加队列阻塞与降级统计字段，便于定位性能瓶颈和异常。
- 扩展设置项：自动重试、最大重试次数、输出图像模式、页级重试限制、语言分组等。
- 输入过滤增强：自动忽略隐藏临时文件（如 `._*`、`_temp.pdf`、`_ocr_temp`）。

## v1.0.1 (2026-02-22)

### 修复

- **修复页面丢失问题**：处理大文件时，流水线队列的定期保存操作（原使用 `garbage=4, deflate=True`）会阻塞主线程长达 30-60 秒，超过渲染线程的队列写入超时，导致后续页面被静默丢弃（如 59 页 PDF 输出仅 20 页）。现改为快速保存模式（`garbage=0, deflate=False`），彻底消除阻塞风险。
- **新增页面完整性验证**：处理完成后自动校验输出页数。若输出页数少于原文件，自动从原文件复制缺失页面作为兜底恢复，并显示警告。
- **新增警告状态显示**：出现恢复页面时，文件状态显示「已完成 ⚠」，鼠标悬停可查看详情；全部完成后弹窗汇总警告数量。

---

## v1.0.0 (2026-02-21)

### 首次发布

**核心功能**
- 扫描版 PDF → 可搜索 PDF 转换（双层 PDF 输出）
- 支持中文（简/繁）、英文、日文识别
- 批量处理：文件队列，支持拖拽添加文件或文件夹
- 三种识别质量模式：快速 / 均衡 / 精准

**稳定性**
- 断点续传：意外中断后从上次位置继续，不重复已完成页面
- 流水线加速：渲染与 OCR 并行，速度提升 30-40%
- 自适应缩放：大尺寸页面自动降低分辨率，防止内存溢出
- 检查点文件自动清理（超过 24 小时的过期检查点）

**特色功能**
- 异体字搜索：内置 10,556 条异体字映射，搜索「蔵」可同时命中「藏」
- 多格式导出：可选同时导出 `.txt` 和 `.md` 格式
- 懒加载模型：GUI 启动时不加载 OCR 模型，节省约 500MB 内存
- 调试日志：`OCR_DEBUG=1` 开启详细日志，保存至 `~/.ocr_tool/logs/`

**平台支持**
- macOS (Apple Silicon + Intel)，最低系统要求 macOS 10.15
- Windows 10/11 (64位)
